<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><meta name="author" content="OpenTable"><link rel="icon" href="/favicon.png"><title>OpenTable Tech UK Blog</title><meta name="description"><link rel="alternate" type="application/rss+xml" title="OpenTable Tech UK Blog" href="/atom.xml"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/main.css"><script src="//fonts.otstatic.com/zys4lfz.js"></script><link rel="stylesheet" href="/css/highlight.css">
</head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class="container-fluid"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#main-navbar" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">OpenTable Tech UK Blog</a></div><div id="main-navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/about/">About</a></li><li><a href="/archives/">Archive</a></li><li><a href="/blog/authors/">Authors</a></li></ul></div><div class="avatar-container"><div class="avatar-img-border"><a href="/"><img src="/opentable.png" class="avatar-img"></a></div></div></div></nav><div id="header-big-imgs" data-num-img='3' data-img-src-1="/bigimgs/building.jpg" data-img-desc-1="Alphabeta Building" data-img-src-2="/bigimgs/kitchen.jpg" data-img-desc-2="OpenTable London office" data-img-src-3="/bigimgs/office.jpg" data-img-desc-3="OpenTable Engineers"></div><header class="header-section has-img"><div class="intro-header big-img"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="page-heading"><h1>OpenTable Tech UK Blog</h1><hr class="small"><span class="page-subheading">The technology blog for OpenTable UK.</span></div></div></div></div><span class="img-desc"></span></div></header><div role="main" class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="posts-list"><article class="post-preview"><a href="/blog/2018/05/10/monads-explained-by-a-imperitive-programmer/"><h2 class="post-title">Monads explained by a imperitive programmer - with examples</h2></a><p class="post-meta">Posted on 10 May 2018 · <a href="/blog/categories/Monads/" class="tag post-meta">Monads</a> · <a href="/blog/categories/Functional-programming/" class="tag post-meta">Functional programming</a> · <a href="/blog/categories/Design-patterns/" class="tag post-meta">Design patterns</a></p><div class="post-entry"><p>A monad is any type construct that follows a specific pattern; it works in the same way as other design patterns. The .NET <code>ApplicationContext</code> is a <code>singleton</code> in the same way that <code>Array</code> is a <code>Monad</code>. Something being a monad does not define its purpose; in the same way that a <code>class</code> can implement many interfaces, a monadic type can also conform to many patterns to increase its usefulness.</p>
<p>Monads are hard to get our heads around because they are very generic. They are defined by having two methods: the <code>bind</code> method (also commonly called <code>fmap</code>), and the <code>unit</code> method (also commonly known as <code>pure</code> or <code>from</code>).</p>
<h2 id="A-bind-fmap-method"><a href="#A-bind-fmap-method" class="headerlink" title="A bind/fmap method."></a>A <code>bind</code>/<code>fmap</code> method.</h2><p>The fmap method follows this signature:<br><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Given a monadic type TMonad with value type V1,</span></div><div class="line"><span class="comment">// and a method that takes a value of type V1 and </span></div><div class="line"><span class="comment">// returns the same monadic type TMonad but with </span></div><div class="line"><span class="comment">// a value type of V2, produce a monadic type </span></div><div class="line"><span class="comment">// TMonad with value V2.</span></div><div class="line"><span class="function"><span class="keyword">function</span> (<span class="params">TMonad&lt;V1&gt; m, Func&lt;V1, TMonad&lt;V2&gt;&gt; f</span>) =&gt; <span class="title">TMonad</span>&lt;<span class="title">V2</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>A quick breakdown of the method signature in plain english: <em>given a monadic type <code>TMonad</code> with value type <code>V1</code>, followed by a method that takes a value of type <code>V1</code> and returns the <strong>same</strong> monadic type <code>TMonad</code> but with a value type of <code>V2</code>, produce a monadic type <code>TMonad</code> with value <code>V2</code>.</em></p>
<p>From the signature, it appears that we should give the value V1 from the first monad to the function <code>f</code> and simply return the TMonad from that call. The ability to control the usage of that function and the ability to intercept the return value is where it gets interesting.</p></div><a href="/blog/2018/05/10/monads-explained-by-a-imperitive-programmer/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2017/12/07/meetup-new-ideas-for-the-new-year/"><h2 class="post-title">Meetup: New Ideas for the New Year</h2></a><p class="post-meta">Posted on 7 December 2017 · <a href="/blog/categories/Culture/" class="tag post-meta">Culture</a> · <a href="/blog/categories/Meetup/" class="tag post-meta">Meetup</a></p><div class="post-entry"><p>Tuesday the 12th of December, OpenTable is delighted to host the thirteenth appointment with the <a href="https://twitter.com/webdeldn" target="_blank" rel="external">WEBdeLDN</a> meetup.</p>
<p>To celebrate the end of the year, and welcome the new one with new and fresh ideas, we’ll be listening to different speakers (many of them first-time speakers!) giving lightning talks about the most diverse topics: from personal stories to hardware projects, from 101s on computer science to accessibility and design.</p>
<!-- This is hack comment to ensure the post preview is shown on the homepage --></div><a href="/blog/2017/12/07/meetup-new-ideas-for-the-new-year/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2017/11/14/meetup-bedtime-stories/"><h2 class="post-title">Meetup: Bedtime stories</h2></a><p class="post-meta">Posted on 14 November 2017 · <a href="/blog/categories/Culture/" class="tag post-meta">Culture</a> · <a href="/blog/categories/Meetup/" class="tag post-meta">Meetup</a></p><div class="post-entry"><p>Wednesday the 22nd of November, OpenTable is delighted to host the twelfth appointment with the WEBdeLDN  meetup, featuring talks by <a href="https://twitter.com/karmatosed" target="_blank" rel="external">Tammie Lister</a> (Experience Designer at Automattic) and <a href="https://twitter.com/areaweb" target="_blank" rel="external">Cristiano Rastelli</a> (Front-End Engineer at Badoo).</p>
<p>Tammie’s and Cristiano’s talks are linked by a common fil-rouge: storytelling. In fact, each talk is a story, told by a first-hand protagonist, of two big business-critical projects. The first one is about the complete redesign of one of the core parts of WordPress, the content editor (which involves UI/UX design, the introduction of a new tech stack, a very strict backward compatibility, and much more). The second one is about the introduction (by a developer!) of a design system in a design-driven company, and all the complexities, the failures (the “dragons”) and the wins of this quest.</p>
<!-- This is hack comment to ensure the post preview is shown on the homepage --></div><a href="/blog/2017/11/14/meetup-bedtime-stories/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2017/11/02/circuit-breakers-and-application-resilience/"><h2 class="post-title">Circuit Breakers and Application Resilience</h2></a><p class="post-meta">Posted on 2 November 2017 · <a href="/blog/categories/Polly/" class="tag post-meta">Polly</a> · <a href="/blog/categories/Application-Resilience/" class="tag post-meta">Application Resilience</a> · <a href="/blog/categories/Microservices/" class="tag post-meta">Microservices</a> · <a href="/blog/categories/Error-Handling/" class="tag post-meta">Error Handling</a></p><div class="post-entry"><p>For most people circuit breakers are a concept that belongs in the world of electricity. They are usually a box of fuses under the stairs that prevents the tangle of extension cords from turning into an unexpected open fireplace behind the TV. But the concept of a circuit breaker is something that we can apply to software and software services. </p>
<p>Martin Fowler described a software circuit breaker as follows:</p>
<blockquote>
<p>“… a protected function call in a circuit breaker object, which monitors for failures. Once the failures reach a certain threshold, the circuit breaker trips, and all further calls to the circuit breaker return with an error, without the protected call being made at all” </p>
</blockquote>
<h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p>OpenTable runs on many microservices that depend on one another to deliver the OpenTable site. These services can have dependencies on data stores such as MongoDB and Elastic Search as well as services such as RabbitMQ and Redis. Sometimes these dependencies can have performance or availability issues; such as when somebody accidentally drops an index on a collection in Mongo. </p>
<blockquote>
<p>This actually happened, your author accidentally dropped a critical index while working with a DB synchronization tool which resulted in downtime. Hence this article.</p>
</blockquote></div><a href="/blog/2017/11/02/circuit-breakers-and-application-resilience/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2017/09/04/meetup-frontend-refactoring-at-scale/"><h2 class="post-title">Meetup: Frontend Refactoring at Scale</h2></a><p class="post-meta">Posted on 4 September 2017 · <a href="/blog/categories/Culture/" class="tag post-meta">Culture</a> · <a href="/blog/categories/Meetup/" class="tag post-meta">Meetup</a></p><div class="post-entry"><p>OpenTable is delighted to host the tenth WEBdeLDN monthly meetup with talks by <a href="https://twitter.com/Jack_Franklin" target="_blank" rel="external">Jack Franklin</a> (Frontend Engineer at Thread) and <a href="https://twitter.com/nickbalestra" target="_blank" rel="external">Nick Balestra</a> (Senior Engineer at OpenTable - Delivery Tools Team at OpenTable).</p>
<p>This month’s WEBdeLDN talks will be about frontend refactoring at scale with two real use cases: refactoring a monolith frontend application, as well as migrating a large, business critical application from Angular 1 to React.</p>
<!-- This is hack comment to ensure the post preview is shown on the homepage --></div><a href="/blog/2017/09/04/meetup-frontend-refactoring-at-scale/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2017/07/18/hosting-external-events/"><h2 class="post-title">Hosting external events</h2></a><p class="post-meta">Posted on 18 July 2017 · <a href="/blog/categories/OpenTable/" class="tag post-meta">OpenTable</a> · <a href="/blog/categories/Culture/" class="tag post-meta">Culture</a> · <a href="/blog/categories/Conferences/" class="tag post-meta">Conferences</a></p><div class="post-entry"><p>This June, OpenTable hosted the <a href="https://www.meetup.com/London-Machine-Learning-Study-Group/" target="_blank" rel="external">London Machine Learning Study Group</a> to great success. We provided the food, drinks, and space for an extremely talented speaker and over 100 RSVPs. It was also my first experience hosting an external meetup at OpenTable - and I learned a lot!</p>
<h2 id="My-Experience"><a href="#My-Experience" class="headerlink" title="My Experience"></a>My Experience</h2><p>OpenTable has frequently hosted meetups in our office such as <a href="https://www.meetup.com/WebPlatform-London/" target="_blank" rel="external">Web Platform London</a> and <a href="https://twitter.com/webdeldn" target="_blank" rel="external">WEBdeLDN</a>. However, acting as an event host was a complete unknown for me, so leading up to the machine learning event, I made a point of sitting down with someone who had organised one before.</p>
<p>We documented the key steps in setting up an external event, and then published what we’d discussed on our internal wiki so as to avoid siloing useful information for future use. Following the steps documented in the wiki proved invaluable in reducing my stress on the day.</p>
<p>After our last event we also looked back on how we’d done the last few events.</p>
<h2 id="Retrospective"><a href="#Retrospective" class="headerlink" title="Retrospective"></a>Retrospective</h2></div><a href="/blog/2017/07/18/hosting-external-events/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2017/06/16/pragmatic-testing-with-graphql/"><h2 class="post-title">Pragmatic Testing with GraphQL</h2></a><p class="post-meta">Posted on 16 June 2017 · <a href="/blog/categories/Engineering/" class="tag post-meta">Engineering</a> · <a href="/blog/categories/API/" class="tag post-meta">API</a> · <a href="/blog/categories/Testing/" class="tag post-meta">Testing</a> · <a href="/blog/categories/Acceptance-tests/" class="tag post-meta">Acceptance tests</a> · <a href="/blog/categories/GraphQL/" class="tag post-meta">GraphQL</a></p><div class="post-entry"><p>We’ve been using GraphQL at OpenTable for a little over half a year now.  I won’t go into detail as to why we started using it, but suffice to say, we really enjoyed creating our very first GraphQL endpoint.  It eased a lot of the inconsistencies that we were experiencing with some of our REST-ful services.</p>
<p>This post assumes you have some experience building a GraphQL endpoint.  For those of who you aren’t familiar with it, it feels a lot like having a querying language via an HTTP endpoint.  If you want to try it for yourself, I recommend <a href="https://developer.github.com/v4/explorer/" target="_blank" rel="external">GitHub’s endpoint</a>.  To get started with GraphQL, <a href="http://graphql.org/learn/" target="_blank" rel="external">the official documentation</a> is a perfect place.</p>
<h2 id="The-Problem"><a href="#The-Problem" class="headerlink" title="The Problem"></a>The Problem</h2><p>Now, let’s get back to writing tests for an endpoint.  When we were creating our first endpoint, we started facing regression testing problems while expanding our schema.  It seemed our existing testing methods were ill-equipped to handle it.</p>
<p>Finding a good solution to this is important because I’ve had such a love–hate affair with testing.  All tests are not created equal and a naive developer would say, “write a test in case something changes”.  This certainly isn’t a good measure.  I’ve also found that just attempting to write tests immediately without forethought can be a costly distraction if you grow your codebase.</p>
<h2 id="The-Approach"><a href="#The-Approach" class="headerlink" title="The Approach"></a>The Approach</h2></div><a href="/blog/2017/06/16/pragmatic-testing-with-graphql/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2017/06/01/opentables-global-hackathon-2017/"><h2 class="post-title">OpenTable's Global Hackathon 2017</h2></a><p class="post-meta">Posted on 1 June 2017 · <a href="/blog/categories/Innovation/" class="tag post-meta">Innovation</a> · <a href="/blog/categories/OpenTable/" class="tag post-meta">OpenTable</a> · <a href="/blog/categories/Culture/" class="tag post-meta">Culture</a></p><div class="post-entry"><p>Last week we were excited to kick-off our first OpenTable Global Hackathon, underway simultaneously in San Francisco, Los Angeles, Mumbai, Melbourne, and right here in London. Having personally never attended a hackathon before let alone helped organise one I was initially daunted, but with some careful planning, good suggestions from the team and a fair amount of making it up as we went along, the end result was quite a success.</p>
<p>This post discusses what format our hackathon took, what challenges we faced in coordinating across countries, the experience in the London office and what we learned.</p>
<h2 id="The-basic-format"><a href="#The-basic-format" class="headerlink" title="The basic format"></a>The basic format</h2><p>The hackathon was conceived in our San Francisco headquarters and could easily have been confined to that one office, but I was delighted to learn is was intended to be a global event from the outset. The basic format, described below, was however optimised for our SF office.</p>
<p>In the weeks leading up to the hackathon, individuals were asked to submit their hack proposals. Idea prompts were circulated such as “engages and delights diners” or “socially connected”, as well as the judging criteria; <strong>Originality</strong>, <strong>Feasibility</strong>, <strong>Likely to adopt</strong>, <strong>Fidelity of prototype</strong>, <strong>Business impact</strong> and <strong>Captivating presentation</strong>.</p>
<p>One week before the hackathon, our San Francisco office held a ‘happy-hour’ in which everyone taking part mingled and discussed ideas.  This social event encouraged the developers, designers and product owners to self-organise into teams and submit their proposals in advance.</p></div><a href="/blog/2017/06/01/opentables-global-hackathon-2017/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2017/02/15/the-goal-driven-organisation/"><h2 class="post-title">The goal driven organisation</h2></a><p class="post-meta">Posted on 15 February 2017 · <a href="/blog/categories/Culture/" class="tag post-meta">Culture</a> · <a href="/blog/categories/Agile/" class="tag post-meta">Agile</a> · <a href="/blog/categories/Goals/" class="tag post-meta">Goals</a> · <a href="/blog/categories/Delivery/" class="tag post-meta">Delivery</a></p><div class="post-entry"><p><strong>Quarterly team goals are an effective way to establish organisational purpose, direction and alignment while supporting team agility. But be vigilant - they can be used inappropriately.</strong></p>
<h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p>Due to factors such as growth, acquisition, changing markets amongst others, organisations can find themselves in new environments to which they struggle to adapt.</p>
<p>Scaling Agile in these new environments is hard. The practices and tools that are frequently used to solve this problem can give the appearance of acting against team autonomy and agility. Teams and individuals naturally try to protect the engineering culture that they have worked hard to establish but by allowing new organisational needs to go unmet they put their autonomy and agility at risk.</p>
<p>In this post I will show how quarterly goal setting, using Agile principles and with one eye on the dysfunctions that can arise, is an effective way to meet organisational needs while protecting team agility and engineering culture.</p>
<h2 id="What-needs-are-we-trying-to-meet"><a href="#What-needs-are-we-trying-to-meet" class="headerlink" title="What needs are we trying to meet?"></a>What needs are we trying to meet?</h2></div><a href="/blog/2017/02/15/the-goal-driven-organisation/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2016/11/18/testing-node-apps-with-docker-compose/"><h2 class="post-title">testing-node-apps-with-docker-compose (and some Soul)</h2></a><p class="post-meta">Posted on 18 November 2016 · <a href="/blog/categories/Docker/" class="tag post-meta">Docker</a> · <a href="/blog/categories/Node-js/" class="tag post-meta">Node-js</a> · <a href="/blog/categories/TDD/" class="tag post-meta">TDD</a> · <a href="/blog/categories/Compose/" class="tag post-meta">Compose</a></p><div class="post-entry"><h2 id="Contents-of-this-post"><a href="#Contents-of-this-post" class="headerlink" title="Contents of this post"></a>Contents of this post</h2><ul>
<li><a href="#purpose">Purpose</a>: the reason for this blog post.</li>
<li><a href="#scenario">Scenario</a>: what this example of using docker-compose can be useful for.</li>
<li><a href="#prerequisites">Prerequisites</a>: basic setup to be able to run the code contained in this post.</li>
<li><a href="#example">Code example</a>: an actual step-by-step guide on how you can setup your test environment to run with docker-compose.</li>
<li><a href="#improvements">Improvements</a>: a couple of ideas on how to expand this technique.</li>
</ul>
<h2 id="Purpose"><a href="#Purpose" class="headerlink" title="Purpose"></a><a name="purpose"></a>Purpose</h2><p>As I am sure the audience of this post knows to some extent, <a href="https://www.docker.com/what-docker" target="_blank" rel="external">Docker</a> is a technology that has grown to become popular over the last few years, allowing developers to deploy pieces of software by packaging them into standardized containers, in a number of various ecosystems (Apache Mesos, Amazon Web Services and many more).</p>
<p>So we can use Docker for our deployment needs, awesome. But let’s pay attention to a key word I used above. Docker grants <em>isolation</em>. And what do we like to perform on our application in isolation? Yeah, you guessed right &ndash; testing!</p>
<p>Specifically, with this post, I aim to dig deeper into how to use <a href="https://docs.docker.com/compose/" target="_blank" rel="external">docker-compose</a> (a specific Docker-based tool that enables creation of multi-container Docker applications) to build and run a Node.js application connected to MongoDB, to test their interaction and the interaction of the app with the external world, all inside containers running on your machine. All isolated and testable thanks to the usage of containers that we can spin up, hit with tests, and clean up with little effort. </p>
</div><a href="/blog/2016/11/18/testing-node-apps-with-docker-compose/" class="post-read-more">[Read More]</a></article></div><ul class="pager main-pager"><li class="next"><a href="/page/2">Older Posts →</a></li></ul></div></div></div><footer><div class="container beautiful-jekyll-footer"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href="https://github.com/opentable" title="GitHub"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-github"></i></span></a></li><li><a href="https://twitter.com/opentabletechuk" title="Twitter"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-twitter"></i></span></a></li><li><a href="https://www.linkedin.com/company/12181" title="LinkedIn"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-linkedin"></i></span></a></li><li><a href="http://stackoverflow.com/jobs/companies/opentable" title="StackOverflow"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-stack-overflow"></i></span></a></li></ul><p class="copyright text-muted">© OpenTable • 2018 • <a href="mailto:undefined"></a>
</p><p class="theme-by text-muted">Theme by
<a href="https://github.com/twoyao/beautiful-hexo">beautiful-hexo</a></p></div></div></div></footer><script src="/js/jquery-1.11.2.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/main.js"></script><script src="/js/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
    a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
ga('create', 'UA-2621903-16', 'auto');
ga('send', 'pageview');</script></body></html>