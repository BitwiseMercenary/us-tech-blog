<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><meta name="author" content="OpenTable"><link rel="icon" href="/favicon.png"><title>OpenTable Tech UK Blog</title><meta name="description"><link rel="alternate" type="application/rss+xml" title="OpenTable Tech UK Blog" href="/atom.xml"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/main.css"><script src="//fonts.otstatic.com/zys4lfz.js"></script><link rel="stylesheet" href="/css/highlight.css">
</head><body><nav class="navbar navbar-default navbar-fixed-top navbar-custom"><div class="container-fluid"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#main-navbar" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand">OpenTable Tech UK Blog</a></div><div id="main-navbar" class="collapse navbar-collapse"><ul class="nav navbar-nav navbar-right"><li><a href="/about/">About</a></li><li><a href="/archives/">Archive</a></li><li><a href="/blog/authors/">Authors</a></li></ul></div><div class="avatar-container"><div class="avatar-img-border"><a href="/"><img src="/opentable.png" class="avatar-img"></a></div></div></div></nav><div id="header-big-imgs" data-num-img='3' data-img-src-1="/bigimgs/building.jpg" data-img-desc-1="Alphabeta Building" data-img-src-2="/bigimgs/kitchen.jpg" data-img-desc-2="OpenTable London office" data-img-src-3="/bigimgs/office.jpg" data-img-desc-3="OpenTable Engineers"></div><header class="header-section has-img"><div class="intro-header big-img"><div class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="page-heading"><h1>OpenTable Tech UK Blog</h1><hr class="small"><span class="page-subheading">The technology blog for OpenTable UK.</span></div></div></div></div><span class="img-desc"></span></div></header><div role="main" class="container"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><div class="posts-list"><article class="post-preview"><a href="/blog/2013/07/24/one-gun-many-enemies/"><h2 class="post-title">One Gun - Many Enemies</h2></a><p class="post-meta">Posted on 24 July 2013 · <a href="/blog/categories/Testing/" class="tag post-meta">Testing</a> · <a href="/blog/categories/JavaScript/" class="tag post-meta">JavaScript</a> · <a href="/blog/categories/Jasmine/" class="tag post-meta">Jasmine</a></p><div class="post-entry"><p>I spent some time, re-investigating Javascript. After a few months of intensive TDD and SOLID training at OpenTable I was curious how those principles apply in a slightly different environment. Guess what, they do not differ that much… I planned to write about all this sometime in the future after gaining more experience from real battles ahead, however <a href="http://watirmelon.com/2013/02/09/why-i-dont-like-Jasmine/" target="_blank" rel="noopener">Watirmelon post</a> invited me to attack this subject immediately.</p>
<p>I went through the available testing frameworks for Javascript and decided on Jasmine. Why? Mainly because of its BDD syntax which is fashionable this season. The second reason is that it has really cool documentation. Finally, the basic set up of just running an HTML file in a browser got me up and running fast.</p>
<p>Let’s look at the basics - what I expect from different types of tests and how Jasmine fits into those requirements: </p>
<h2 id="Unit-Testing"><a href="#Unit-Testing" class="headerlink" title="Unit Testing"></a>Unit Testing</h2><h3 id="Advice-from-senior-craftsman"><a href="#Advice-from-senior-craftsman" class="headerlink" title="Advice from senior craftsman"></a>Advice from senior craftsman</h3><ul>
<li>Shoot them one by one<br>(structure your code so that it is easier to maintain)</li>
<li>Be sure you kill with every shot<br>(verify small bits of code to nail down issues)</li>
<li>Kill them all<br>(verify edge cases)</li>
<li>Kill them quick<br>(provide fast feedback on issues)</li>
<li>Choose a fast shooting gun - the faster you shoot, the more enemies you will kill<br>(unit tests must be blazing fast)</li>
<li>Choose the most reliable gun - if it is stuck then you are dead<br>(when unit tests are brittle you will stop depending on them)</li>
<li>Your gun needs to be light enough to carry everywhere<br>(unit tests are your gun, so you must be able to run them all locally)</li>
</ul>
<p>Jasmine works great for all those aims, as it is really fast and it allows you to stub both objects and DOM elements (especially combined with a Jasmine-jQuery plugin). Keep in mind that Unit Testing is useful only if you either write new code or refactor old code. Do not ever try to write Unit Tests for existing code which you don’t intend to refactor. It’s like shooting the dead. You simply cannot kill them with another bullet.</p>
<h2 id="Integration-Testing"><a href="#Integration-Testing" class="headerlink" title="Integration Testing"></a>Integration Testing</h2><h3 id="Advice-from-senior-craftsman-1"><a href="#Advice-from-senior-craftsman-1" class="headerlink" title="Advice from senior craftsman"></a>Advice from senior craftsman</h3><ul>
<li>Beware of the hidden sniper<br>(test against external dependencies like files, databases, network services)</li>
<li>You are part of your squad<br>(verify that components of the application work well together)</li>
<li>Observe the environment<br>(try to use depenedencies as close to the real problem as possible e.g. example file, database with test data, test version of an external service)</li>
<li>Point in the right direction<br>(do not try to test your stack top-down, instead concentrate on interfaces and adapters that you could not test in unit tests)</li>
</ul></div><a href="/blog/2013/07/24/one-gun-many-enemies/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2013/07/08/managing-windows-certificates-with-powershell/"><h2 class="post-title">Managing Windows Certificates with PowerShell</h2></a><p class="post-meta">Posted on 8 July 2013 · <a href="/blog/categories/Automation/" class="tag post-meta">Automation</a> · <a href="/blog/categories/DevOps/" class="tag post-meta">DevOps</a> · <a href="/blog/categories/PowerShell/" class="tag post-meta">PowerShell</a></p><div class="post-entry"></div><a href="/blog/2013/07/08/managing-windows-certificates-with-powershell/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2013/06/18/ndcoslo/"><h2 class="post-title">NDC Oslo</h2></a><p class="post-meta">Posted on 18 June 2013 · <a href="/blog/categories/Conferences/" class="tag post-meta">Conferences</a></p><div class="post-entry"></div><a href="/blog/2013/06/18/ndcoslo/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2013/06/14/windows-feature-management-with-powershell/"><h2 class="post-title">Windows Feature Management with PowerShell</h2></a><p class="post-meta">Posted on 14 June 2013 · <a href="/blog/categories/Automation/" class="tag post-meta">Automation</a> · <a href="/blog/categories/DevOps/" class="tag post-meta">DevOps</a> · <a href="/blog/categories/PowerShell/" class="tag post-meta">PowerShell</a></p><div class="post-entry"><p>In late 2012, our development team started to move towards our systems being much more automated. Long gone are the days of developers creating runbooks in Word and giving them to our operations team to use to set up our production servers. </p>
<p>When building our webservers on Windows, in order to install / activate Windows features, this was the general set of instructions that was needed to be followed:</p>
<ul>
<li>Click Start Button</li>
<li>Click on Control Panel</li>
<li>Click on Programs</li>
<li>Click on Turn Windows features on or off</li>
</ul>
<p>This would present a screen as follows:</p>
<img src="/images/posts/windowsfeature.png" class="center">
<p>You would need to find the correct features to enable and check the box, press OK and then wait for the features to be installed. </p>
<p>When Microsoft introduced Windows Server 2008 and PowerShell 2.0, they also introducted the module ‘ServerManager’. This is a module that allows us to interact, with PowerShell, Windows Features using a range of cmdlets:</p>
<ul>
<li>Get-WindowsFeature</li>
<li>Add-WindowsFeature</li>
<li>Remove-WindowsFeature</li>
</ul>
<p>This meant that instead of creating runbooks in Word, our developers could create automation scripts that would take a base Windows Server 2008 server and enable all the Windows Features needed to run our applications. This allowed our operations team to move much faster in configuring our servers. </p>
<p>To turn on the ASP.NET Application Development features in Windows, we would run the following script from PowerShell:</p></div><a href="/blog/2013/06/14/windows-feature-management-with-powershell/" class="post-read-more">[Read More]</a></article><article class="post-preview"><a href="/blog/2013/06/07/nlocalgeocoder/"><h2 class="post-title">nLocalGeoCoder</h2></a><p class="post-meta">Posted on 7 June 2013 · <a href="/blog/categories/OSS/" class="tag post-meta">OSS</a> · <a href="/blog/categories/Net/" class="tag post-meta">.Net</a> · <a href="/blog/categories/C/" class="tag post-meta">C#</a> · <a href="/blog/categories/Ruby/" class="tag post-meta">Ruby</a> · <a href="/blog/categories/Collaboration/" class="tag post-meta">Collaboration</a></p><div class="post-entry"><h2 id="History"><a href="#History" class="headerlink" title="History"></a>History</h2><p>With OpenTable having engineering teams spread across multiple offices it’s important for us to maintain open email dialogue about new products us or our teams have created, new tools we’ve discovered or problem solving approaches that have helped us achieve our goals.  Recently in one of these emails Aish introduced the team to a new open source ruby implementation of reverse geocode lookup for latitude and longitude he’d written called <a href="https://github.com/aishfenton/local-geocoder" target="_blank" rel="noopener">local-geocoder</a>.  With an interest in understanding how this worked, to learn a bit of ruby, to make this project accessible to .net developers and just to see how long it would take I decided to port it to C# and .net.</p>
<h2 id="How-reverse-geocoding-works"><a href="#How-reverse-geocoding-works" class="headerlink" title="How reverse geocoding works"></a>How reverse geocoding works</h2><p>Latitude and longitude geographical coordinates are great but 37.819548,-122.479046 doesn’t really mean much to me. Knowing this is in the San Francisco bay area is much more useful interpretation.</p>
<p>That’s where reverse geocoding comes in.  Normally geocoding tries to locate geographical coordinates from other data like postal (zip) codes or street level addresses.  Reverse geocoding does the opposite and can, given enough lookup data, be very precise.</p>
<p>There are a number of online reverse geocoding providers, like Google, who can perform this for you however there are normally usage limits or costs for using them.  To add to this the latency of these service can slow your logic down.  Wouldn’t it be nice if this could be done locally at high speed and in memory.</p>
<h2 id="Using-nLocalGeocoder"><a href="#Using-nLocalGeocoder" class="headerlink" title="Using nLocalGeocoder"></a>Using nLocalGeocoder</h2><p>It’s really easy to use, just new up a Geocoder and you’re off…</p>
<pre><code>var geocoder = new Geocoder();
var result = geocoder.ReverseGeocode(-122.479046M, 37.819548M);
</code></pre><p>The result variable now holds an instance of the Result struct.  This type has the following properties:-</p></div><a href="/blog/2013/06/07/nlocalgeocoder/" class="post-read-more">[Read More]</a></article></div><ul class="pager main-pager"><li class="previous"><a href="/page/13">← Newer Posts</a></li><li class="next"><a href="/page/15">Older Posts →</a></li></ul></div></div></div><footer><div class="container beautiful-jekyll-footer"><div class="row"><div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1"><ul class="list-inline text-center footer-links"><li><a href="https://github.com/opentable" title="GitHub"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-github"></i></span></a></li><li><a href="https://twitter.com/opentabletechuk" title="Twitter"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-twitter"></i></span></a></li><li><a href="https://www.linkedin.com/company/12181" title="LinkedIn"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-linkedin"></i></span></a></li><li><a href="http://stackoverflow.com/jobs/companies/opentable" title="StackOverflow"><span class="fa-stack fa-lg"><i class="fa fa-circle fa-stack-2x"></i><i class="fa fa-stack-1x fa-inverse fa-stack-overflow"></i></span></a></li></ul><p class="copyright text-muted">© OpenTable • 2019 • <a href="mailto:undefined"></a>
</p><p class="theme-by text-muted">Theme by
<a href="https://github.com/twoyao/beautiful-hexo">beautiful-hexo</a></p></div></div></div></footer><script src="/js/jquery-1.11.2.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/main.js"></script><script src="/js/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script>(function (i, s, o, g, r, a, m) {
    i['GoogleAnalyticsObject'] = r;
    i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
    a = s.createElement(o),
            m = s.getElementsByTagName(o)[0];
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m)
})(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
ga('create', 'UA-2621903-16', 'auto');
ga('send', 'pageview');</script></body></html>